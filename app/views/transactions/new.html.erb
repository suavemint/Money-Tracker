<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
  <h1 style="margin: 0; color: #1f2937; font-size: 2rem;">Add New Transaction</h1>
  <%= link_to "â† Back to Transactions", transactions_path, style: "color: #6b7280; text-decoration: none;" %>
</div>

<div style="max-width: 600px;">
  <div style="background-color: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 2rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
    <%= form_with model: @transaction, local: true, style: "display: block;" do |form| %>
      <% if @transaction.errors.any? %>
        <div style="background-color: #fef2f2; border: 1px solid #fecaca; color: #dc2626; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
          <h4 style="margin: 0 0 0.5rem 0;">Please fix the following errors:</h4>
          <ul style="margin: 0; padding-left: 1.5rem;">
            <% @transaction.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div style="margin-bottom: 1.5rem;">
        <%= form.label :description, style: "display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem;" %>
        <%= form.text_field :description, placeholder: "e.g., Whole Foods Market", 
            style: "width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 1rem;" %>
      </div>

      <div style="margin-bottom: 1.5rem;">
        <%= form.label :amount, style: "display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem;" %>
        <%= form.number_field :amount, step: 0.01, placeholder: "0.00", 
            style: "width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 1rem;" %>
        <div style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">
          Use negative amounts for expenses (e.g., -50.00) and positive for income (e.g., 3000.00)
        </div>
      </div>

      <div style="margin-bottom: 1.5rem;">
        <%= form.label :transaction_date, style: "display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem;" %>
        <%= form.date_field :transaction_date, value: Date.current, 
            style: "width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 1rem;" %>
      </div>

      <div style="margin-bottom: 1.5rem;">
        <%= form.label :transaction_type, style: "display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem;" %>
        <%= form.select :transaction_type, 
            options_for_select([
              ['Debit/Expense', 'debit'],
              ['Credit/Income', 'credit'],
              ['Transfer', 'transfer']
            ], @transaction.transaction_type),
            { prompt: 'Select transaction type...' },
            { style: "width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 1rem; background-color: white;" } %>
      </div>

      <% if params[:account_id] %>
        <%= form.hidden_field :account_id, value: params[:account_id] %>
        <div style="margin-bottom: 1.5rem;">
          <div style="display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem;">Account</div>
          <div style="padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; background-color: #f9fafb; color: #6b7280;">
            <%= Account.find(params[:account_id]).name %>
          </div>
        </div>
      <% else %>
        <div style="margin-bottom: 1.5rem;">
          <%= form.label :account_id, "Account", style: "display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem;" %>
          <%= form.collection_select :account_id, Account.all, :id, :name,
              { prompt: 'Select an account...' },
              { style: "width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 1rem; background-color: white;" } %>
        </div>
      <% end %>

      <div style="margin-bottom: 2rem;">
        <%= form.label :category_id, "Category (optional)", style: "display: block; font-weight: 600; color: #374151; margin-bottom: 0.5rem;" %>
        <%= form.collection_select :category_id, Category.all, :id, :name,
            { prompt: 'Select a category...' },
            { style: "width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 1rem; background-color: white;" } %>
        <div style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">
          Choose a category to help track your spending patterns
        </div>
      </div>

      <div style="display: flex; gap: 1rem; justify-content: flex-end;">
        <%= link_to "Cancel", transactions_path, style: "padding: 0.75rem 1.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem; text-decoration: none; color: #374151; background-color: white;" %>
        <%= form.submit "Create Transaction", style: "background-color: #2563eb; color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.375rem; font-weight: 500; cursor: pointer;" %>
      </div>
    <% end %>
  </div>
</div>
